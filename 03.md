---
title: "Storage-Aware Server Assignment"
layout: single
author_profile: false
---

<div class="justified" style="margin-bottom: 2em;">
  <strong>Scenario:</strong> Once video chunks are approved and pass copyright validation, they must be stored efficiently across a distributed storage network. Assigning these chunks to servers in a way that balances load and minimizes disruption when servers are added or removed is critical. This is achieved using consistent hashing [1].
</div>

![Storage nodes on hash ring](/assets/images/03.png)

<div class="justified" style="margin-bottom: 2em;">
  <em>Figure 1: Video chunks mapped to distributed storage nodes via consistent hashing on a ring.</em> [1]
</div>

<div class="justified" style="margin-bottom: 2em;">
  <strong>Theory:</strong> Consistent hashing ensures that both chunks (keys) and storage servers (bins) are hashed onto a circular hash space. Each chunk is placed on the server whose hash is the first one clockwise from the chunk‚Äôs hash. When new storage is added, only nearby chunks need to migrate, preserving most of the layout and maintaining load balance [2].
</div>

<div class="justified" style="margin-bottom: 2em;">
  <strong>Application:</strong> YouTube stores billions of video fragments across global datacenters. To prevent hot spots and optimize cache locality, each chunk is assigned to a storage node via consistent hashing. Adding or removing a server (e.g., due to scaling or failure) only shifts a subset of chunks. This provides scalable, fault-tolerant storage with predictable performance.
</div>

<h4 style="margin-top: 2em;">Challenges:</h4>
<ul style="margin-bottom: 2em;">
  <li>Uniform hashing does not guarantee even storage usage ‚Äúvirtual nodes‚Äù or bounded loads are often needed</li>
  <li>Hash collisions or clustering can lead to temporary imbalances</li>
</ul>

<h4 style="margin-top: 2em;">Market Benefits:</h4>
<ul style="margin-bottom: 2em;">
  <li>ü™∂ Minimal disruption on capacity changes</li>
  <li>üåç Better global distribution of data chunks</li>
  <li>üöÄ Stable foundation for fast video playback and caching</li>
</ul>

<h4 style="margin-top: 2em;">Design Techniques and Algorithms:</h4>
<ul style="margin-bottom: 2em;">
  <li><strong>Consistent Hashing</strong><br>
    <ul>
      <li><strong>Description:</strong> Both video chunks and storage servers are hashed into a ring. Each chunk goes to the next server clockwise. This balances assignments and avoids large-scale reshuffling on changes.</li>
      <li><strong>Time Complexity:</strong> O(log N) for key lookup using binary search on a sorted ring</li>
      <li><strong>Space Complexity:</strong> O(N) for the hash table and node list</li>
    </ul>
  </li>
</ul>

<h4 style="margin-top: 2em;">MVC Architecture Alignment:</h4>
<div class="justified" style="margin-bottom: 2em;">
  In a well-structured distributed system like YouTube‚Äôs backend, the <strong>Model-View-Controller (MVC)</strong> pattern helps organize components. The <strong>Model</strong> corresponds to the data layer video chunks and server mappings stored through consistent hashing. The <strong>Controller</strong> includes logic for node addition/removal and key routing (as shown in the implementation), managing how the system reacts to user uploads or capacity changes. The <strong>View</strong> might be represented by monitoring dashboards or interfaces showing server load and mapping. This architectural discipline ensures that storage infrastructure logic is modular, scalable, and testable.
</div>

<p style="margin-top: 2em;">View Implementation: <a href="https://github.com/AdityaKhatawkar/aditya_aps_portfolio.github.io/blob/main/codes/03_Storage_Aware_Server_Assignment.py" target="_blank">Storage_Aware_Server_Assignment.py</a></p>

<h4 style="margin-top: 3em;">References</h4>
<ol style="margin-bottom: 3em;">
  <li>
    <a href="https://highscalability.com/consistent-hashing-algorithm/" target="_blank">
      HighScalability ‚Äì ‚ÄúConsistent hashing algorithm‚Äù
    </a>
  </li>
  <li>
    <a href="https://www.streamingmedia.com/Articles/Editorial/Featured-Articles/The-Algorithm-Series-The-Math-Behind-the-CDN-136194.aspx?pageNum=2" target="_blank">
      Tim S. (2020). ‚Äú The Algorithm Series: The Math Behind the CDN‚Äù. Online. Streamingmedia.
    </a>
  </li>
</ol>
